name: Generate Profile Metrics

# Roda diariamente e permite execução manual
on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:
  push: { branches: ["master", "main"] } # Roda em push no master/main

jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: lowlighter/metrics@latest
        with:
          # TOKEN OBRIGATÓRIO (Use o mesmo GITHUB_TOKEN que já funciona)
          token: ${{ secrets.GITHUB_TOKEN }}
          
          # Usuário e Arquivo de Saída
          user: PedroZxK
          base: header, activity, community, metadata # Ativa estatísticas básicas
          filename: profile-metrics.svg
          
          # Plugins Adicionais:
          # 1. Top Languages (Linguagens Mais Usadas)
          plugin_languages: yes
          plugin_languages_threshold: 0% # Inclui todas as linguagens
          plugin_languages_skipped: PedroZxK/PedroZxK # Ignora o repositório de perfil
          plugin_languages_limit: 8
          plugin_languages_details: bytes, percentage
          
          # 2. Configuração Visual
          template: classic # Estilo Clássico (Funciona bem)
          config_timezone: America/Sao_Paulo # Fuso horário correto
